var activity_app=angular.module("activityApp",["ngMaterial"]);activity_app.controller("activityCtrl",function(a){a.progress=true;a.wtd_parse_activity=function(){Parse.Cloud.run("get_activity_v2",wtd_base_request,{success:function(b){jQuery.ajax({url:wtd_ajax_url,type:"post",data:{action:"wtd_build_activity",data:b},success:function(c){jQuery("#wtd_parse_content").html(c);a.progress=false;a.$apply()}})},error:function(b){}})};angular.element(document).ready(function(){a.wtd_parse_activity()})});var wtd_direction_link;var visitor_lat;var visitor_lng;jQuery(document).on("click",".wtd_direction_link",function(b){var a=jQuery(this).attr("href");if(a.indexOf("%currlocation%")!==-1){b.preventDefault();wtd_direction_link=jQuery(this);r=confirm("We need to locate your position first.");if(r){wtd_locate_visitor()}}});function wtd_show_directions(a){alert("Please click again on the link you wish.");var b=a.coords.latitude+","+a.coords.longitude;jQuery(".wtd_direction_link").each(function(){var c=jQuery(this).attr("href");c=c.replace("%currlocation%",b);jQuery(this).attr("href",c)})}function wtd_locate_visitor(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(wtd_show_directions)}else{alert("Geolocation is not supported by this browser.")}};